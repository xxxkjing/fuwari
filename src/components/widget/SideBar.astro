---
import Profile from './Profile.astro'
import Tag from './Tags.astro'
import Categories from './Categories.astro'
import type { MarkdownHeading } from 'astro'
import TOC from './TOC.astro'

interface Props {
    class? : string
    headings? : MarkdownHeading[]
}

const className = Astro.props.class
const headings = Astro.props.headings

---
<div id="sidebar" class:list={[className, "w-full"]}>
    <div class="flex flex-col w-full gap-4 mb-4">
        <Profile></Profile>
    </div>
    <div class="flex flex-col w-full gap-4 mb-4">
        <!-- 音乐板块（美化后） -->
<div class="bg-gray-800 border-l-4 border-purple-500 rounded-xl p-4 mb-6 shadow-lg relative overflow-hidden transition-all duration-300 hover:shadow-2xl hover:-translate-y-1">
  <!-- 音符装饰 -->
  <svg xmlns="http://www.w3.org/2000/svg" class="absolute top-2 right-2 text-purple-400 opacity-50" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="24" height="24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
  </svg>
  
  <div class="flex justify-center mb-3">
    <img 
      src="/music/cover.jpg" 
      alt="当前播放音乐" 
      class="w-16 h-16 md:w-20 md:h-20 rounded-full object-cover border-2 border-purple-700 transition-transform duration-500 hover:scale-105"
    >
  </div>
  <h3 class="text-base md:text-lg font-bold mb-2 text-white text-purple-300">音乐时光</h3>
  <p class="text-gray-400 text-sm mb-4">🎵 分享近期喜爱的音乐</p>
  <audio controls class="w-full md:w-96 mb-3 rounded-lg shadow-inner bg-gray-700 text-purple-400">
    <source src="/music/current-song.mp3" type="audio/mpeg">
    您的浏览器不支持音频播放功能。
  </audio>
  <div class="flex justify-center space-x-3">
    <a href="https://music.163.com" target="_blank" class="text-purple-400 hover:text-purple-300 transition-all duration-300 hover:scale-110 hover:rotate-3">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
    </a>
    <a href="https://spotify.com" target="_blank" class="text-purple-400 hover:text-purple-300 transition-all duration-300 hover:scale-110 hover:rotate-3">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
      </svg>
    </a>
  </div>
</div>
    </div>
    <div id="sidebar-sticky" class="transition-all duration-700 flex flex-col w-full gap-4 top-4 sticky top-4">
        <Categories class="onload-animation" style="animation-delay: 150ms"></Categories>
        <Tag class="onload-animation" style="animation-delay: 200ms"></Tag>
    </div>
</div>
